<!doctype html>
<head>
	<title>wheelchair transit demo</title>
	<meta charset="utf-8">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">
	<link rel="stylesheet" href="styles/map.css">

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>

<body>
	<div id="map"></div>
	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
	
	<script>
	var map = L.map('map').setView([39.9524384, -75.1636757], 13);

		L.tileLayer('http://{s}.tiles.mapbox.com/v3/leekinney.ij51biij/{z}/{x}/{y}.png', {
    		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    		maxZoom: 18
	}).addTo(map);

	var marker = L.marker([39.9524384, -75.1636757]).addTo(map);
	// var circle = L.circle([39.9524384, -75.1636757], 150, {
	// 	color: 'red',
	// 	fillColor: '#f03',
	// 	fillOpacity: 0.5
	// }).addTo(map);

	marker.bindPopup("wheelchairs cannot<br>navigate transfers here").openPopup();

	// L.geoJson(geojsonFeature).addTo(map);
	// myLayer.addData(geojsonFeature);

	// var myLines = [{
	// 	"type": "LineString",
	// 	"coordinates": [[39.948716, -75.164498], [39.944095, -75.165424], [39.936191, -75.167141]]
	// }, {
	// 	"type": "LineString", 
	// 	"coordinates": [[39.948721, -75.164498], [39.944100, -75.165424], [39.936196, -75.167141]]
	// }];

	// var myStyle = {
	// 	"color": "#ff7800", 
	// 	"weight": 5, 
	// 	"opacity": 0.65
	// };

	// L.geoJson(myLines, {
	// 	style: myStyle
	// }).addTo(map);


// $.ajax({
//   url: "stops.txt",
//   context: document.body
// }).done(function() {
//   $( this ).addClass( "done" );
// });

// $.ajax({
//     type: "GET",
//     url: "stops.txt",
//     dataType: "text",
//     success: readData(data)
// })
var url = "http://localhost:8888/wheelchairtransit/stops.txt"
var txtFile = new XMLHttpRequest();
txtFile.open("GET",  url, true);
txtFile.onreadystatechange = function()
{
  if (txtFile.readyState === 4) {  // document is ready to parse.
    if (txtFile.status === 200) {  // file is found
      allText = txtFile.responseText; 
      //lines is an array
      console.log(allText)

      lines = txtFile.responseText.split("\n");
      console.log(lines)
    }
  }
}
txtFile.send(null);

	</script>
</body>

</html>

