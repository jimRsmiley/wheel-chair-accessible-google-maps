<html>
<head>
    <title>Wheel Chair Accessible Google Maps</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
</head>

    <style>
        #map-canvas {
            width: 60%;
            height: 500px;
            float: left;
        }

        #messages {
            width: 35%;
            height: 500px;
            float: right;
            padding: 10px 20px;
            border: solid 1px;
            overflow: auto;
        }
    </style>

<script>

var map;
var outages;
var directionsService = new google.maps.DirectionsService();
var directionsDisplay = new google.maps.DirectionsRenderer();
var markersArray = [];

function getOutages( callback ) {
    url = "http://cors.io/www.unlockphilly.com/septa/elevator/outages";

    $.ajax( {
        url : url,
        success : function(data) {
            outages = data;
        },
        error: function() {
            console.log('unable to retreive outages, setting to cached outages');
            outages = tempoutages;
        }
    })
    
};

// to help google maps find addresses, let's append Philly
function addPhillyToAddress(str) {
    return str + ', Philadelphia PA';
}

// constructor
function WheelChairAccessibleGoogleMaps( response ) {
    this.response = response;
    this.issuesFound = false;
}

function getNoIssuesMessage() {
    return "no issues found with route, enjoy your day";
}

// add a message to the message div, or append if append=true
function addMessage( str, append ) {
    append = (typeof append === "undefined") ? true : append;

    var cssSelector = '#messages';

    if( append ) {
        $(cssSelector).append( str );
    }
    else {
        $(cssSelector).html( str );
    }
}

function clearMap() {
    if( directionsDisplay != null ) // if it was already set
        directionsDisplay.setMap(null); // clear it from the map

    for (var i = 0; i < markersArray.length; i++ ) {
        markersArray[i].setMap(null);
    }
    markersArray.length = 0;

    addMessage('',false); // clear messages
    this.issuesFound = false;
}

StopStatus = {

    NO_ELEVATOR : 0,
    ELEVATOR_WORKING : 1,
    ELEVATOR_NOT_WORKING : 2,

    toString: function( status ) {
        if( status === StopStatus.NO_ELEVATOR ) {
            return "no elevator";
        }
        else if( status === StopStatus.ELEVATOR_WORKING ) {
            return "elevator working";
        }
        else if( status === StopStatus.ELEVATOR_NOT_WORKING ) {
            return "elevator not working";
        }

        return "no idea what the status is";
    }
};

SeptaStation = function() {
    this.outage = null;
};

SeptaStation.prototype.addOutage = function(outage) {
    this.outage = outage;
}

WheelChairAccessibleGoogleMaps.prototype.isCityHallTransfer = function( lastStep, step ) {
    return lastStep != null 
        && lastStep.travel_mode == 'TRANSIT' 
        && lastStep.transit.line.short_name == 'MFL' 
        && step.instructions == 'Walk to City Hall Station'
}

WheelChairAccessibleGoogleMaps.prototype.evaluateStation = function( stationName, elevatorStatus, terminusStr, lat, lng ) {
    console.log( 'elevator status: ' + elevatorStatus );

    var strong = function( str ) {
        return '<strong style="color:red">' + str + '</strong>';
    }

    stationStr = '<p>' + terminusStr + ' station<br/>' + stationName + '<br/>';

    if( elevatorStatus == StopStatus.ELEVATOR_WORKING ) {
        addMessage( stationStr + 'has a working elevator</p>', true );
    } 

    else { // issue with route
        self.issuesFound = true;
        self.addXMarker( lng, lat );
        
        var elevatorStatusDescription = strong( StopStatus.toString( elevatorStatus ) );

        if( elevatorStatus == StopStatus.ELEVATOR_NOT_WORKING ) {
            addMessage( stationStr + elevatorStatusDescription, true );
        }

        else if( elevatorStatus == StopStatus.NO_ELEVATOR ) {
            addMessage( stationStr + elevatorStatusDescription + '</p>', true );
        }
    }
}

// given the waypoints from Google Directions, evaluate whether any of the stops are inaccessible to wheelchairs
WheelChairAccessibleGoogleMaps.prototype.evaluateRoute = function( waypoints ) {
    
    var self = this;
    var legs = this.response.routes[0].legs;

    transitStops = [];

    var issuesFound = false;

    $.each( legs, function(index, leg ) {
        
        console.log( 'leg follows' );
        console.log( leg );
        //console.log( JSON.stringify(leg) );

        var lastStep = null; // we need to record lastSteps to watch for city hall transfers

        // for each step
        $.each( leg.steps, function( index, step ) {

            var instructions = step.instructions;

            addMessage( '<h4>Step ' + (index+1) + ' ' + instructions + '</h4>' );

            if( step.travel_mode == 'TRANSIT' ) {

                vehicleType = step.transit.line.vehicle.type;

                if( vehicleType != 'BUS' && vehicleType != 'TRAM' ) { // is not a bus stop

                    lineShortName = step.transit.line.short_name;
                    departStopName = step.transit.departure_stop.name;
                    arriveStopName = step.transit.arrival_stop.name;
                    departureStop = step.transit.departure_stop;
                    arrivalStop = step.transit.arrival_stop;

                    departStatus = self.getElevatorStatus( departStopName, lineShortName );
                    arriveStatus = self.getElevatorStatus( arriveStopName, lineShortName );

                    self.evaluateStation( departStopName, departStatus, 'departure', 
                        departureStop.location.A, departureStop.location.k );

                    self.evaluateStation( arriveStopName, arriveStatus, 'arrival', 
                        arrivalStop.location.A, arrivalStop.location.k );
                }
            } // end if it's a transit stop

            lastStep = step;

            addMessage( '<hr/>' );
        }); // each step
    } ); // each leg

    if( !self.issuesFound ) {
        addMessage('no issues found, route works!',true);
    }
}

WheelChairAccessibleGoogleMaps.prototype.getClosestStation = function(lat,lng) {

    var url = "http://cors.io/www3.septa.org/hackathon/locations/get_locations.php?lon="+lng+"&lat="+lat+"&radius=3&jsoncallback=?"

    $.getJSON(url,function(result) {
        console.log( 'result of getClosestStation' );
        console.log( result );
    });
}

WheelChairAccessibleGoogleMaps.prototype.addXMarker = function(lng,lat) {
    var image = {
        url: 'redx.png',
    };

    var marker = new google.maps.Marker({
          position: new google.maps.LatLng( lng, lat ),
          anchor: new google.maps.Point(0, 1000),
          map: map,
          icon: image,
          zIndex: 10000
    });
    markersArray.push(marker);
    return marker;
}

WheelChairAccessibleGoogleMaps.prototype.getElevatorStatus = function( stopName, lineShortName ) {
    self = this;

    stationObj = this.getSeptaStation( stopName, lineShortName );

    if( this.hasElevator( stationObj ) ) {
        if( self.getOutage( stationObj ) !== null ) {
            return StopStatus.ELEVATOR_NOT_WORKING;
        }
        else {
            return StopStatus.ELEVATOR_WORKING;
        }
    } else {
        return StopStatus.NO_ELEVATOR;
    }
}

// return whether the given station object has an elevator
WheelChairAccessibleGoogleMaps.prototype.hasElevator = function( stationObj ) {
    if( stationObj.wheelchair_boarding !== null ) {
        return true; 
    }
    return false;
}

// given the station, returns the outage, or null if there is none
WheelChairAccessibleGoogleMaps.prototype.getOutage = function( stationObj ) {
    var retVal = null;
    $.each( outages, function(index, outage) {
        if( stationObj.stop_name == outage.stop_name ) {
            retVal = outage;
        }
        return; //break
    } );
    return retVal;
}

WheelChairAccessibleGoogleMaps.prototype.getGoogleStationLineShortName = function( station ) {
    if( station.MFL == 1 ) {
        return "MFL";
    }
    else if( station.BSS == 1 ) {
        return "BSS";
    }
    console.log( "could not determine the short name for the following station" );
    console.log( station );
}
/*
    get the station from railStations json issued by septa
*/
WheelChairAccessibleGoogleMaps.prototype.getSeptaStation = function( stopName, lineShortName ) {
    self = this;
    foundStation = null;

    $.each( railStations.stations, function( index, station ) {

        if( stopName.toLowerCase() == station.stop_name.toLowerCase() 
            && lineShortName == self.getGoogleStationLineShortName( station ) ) {
                foundStation = station;
                return;
        }
        else if( foundStation === null 
            && lineShortName == 'MFL' 
            && stopName == '69th Street Transportation Center'
            && station.stop_name == '69th St Transportation Center MFL West' ) {

            foundStation = station;
            return;
        }
    } );


    if( foundStation === null ) {

        msg = 'unable to find station in rail lines with name "' + stopName + '" shortName: ' + lineShortName;
        console.log( msg );
        $.each( railStations.stations, function( index, station ) {
            console.log( stopName + " " + station.stop_name );
        } );
    }

    return foundStation;
}

// return whether the station has a working elevator
WheelChairAccessibleGoogleMaps.prototype.isElevatorWorking = function( station ) {
    return station.wheelchair_boarding !== null;
}

function loadMap() {
    var philadelphia = new google.maps.LatLng(39.9523400,-75.1637900);
    var mapOptions = {
        zoom: 10,
        center: philadelphia
    };

    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
}

function getDirections() {

    var startAddress = $('#startAddress').val();
    var endAddress   = $('#endAddress').val();

    if( startAddress == '' && endAddress == '' ) {
        addMessage( 'must enter start and end addresses' );
    }

    startAddress = addPhillyToAddress( $('#startAddress').val() );
    endAddress = addPhillyToAddress( $('#endAddress').val() );
    console.log( "start address: '" + startAddress + "'' end address: '" + endAddress + "'" );

    request = {
        origin: startAddress,
        destination: endAddress,
        provideRouteAlternatives: false,
        travelMode: google.maps.TravelMode.TRANSIT,
    };

    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {

            clearMap();

            myRes = new WheelChairAccessibleGoogleMaps( response );

            
            directionsDisplay = new google.maps.DirectionsRenderer();
            directionsDisplay.setMap(map);

            myRes.evaluateRoute();

            directionsDisplay.setDirections( myRes.response );

        }
        else {
            addMessage( 'address request failed' );
            console.log( 'request failed with ' + status );
            console.log( response );
        }
    });
}


$(document).ready( function() {

    if( true ) {
        $('#startAddress').val( 'Frankford and Bridge' );
        $('#endAddress').val( 'Broad and Oregon' );
    }
    loadMap();
    getOutages();
});
    

</script>

<body>

</body>

<a href="https://github.com/jimRsmiley/wheel-chair-accessible-google-maps"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>

<h3>Wheelchair Accessible Google Maps</h3>
<div><p>The web app shows whether a wheelchaired transit rider can actually make a trip planned through Google Maps. In Philadelphia, all buses are wheel chair accessible. The Market-Frankford El and the Broad Street Subway stops are not fully wheel chair accessible. When transit riders in wheelchairs use Google Maps to plan transit trips, there's no way of knowing through Google Maps if the stations they use will be accessible to wheelchairs. The data is out there, but wheelchair accessible data is in one location, and elevators that are installed but not currently working. Visit <a href="http://www.unlockphilly.com/">Unlock Philly for more information.</a></p></div>

<div>
    <form onsubmit="getDirections(); return false;">
        <input id="startAddress" type="text" value="" placeholder='enter starting address'/>
        <input id="endAddress" type="text" value="" placeholder='enter destination address'/>
        <input type="submit" name="Submit" value="Submit"/>
    </form>
</div>

<div id='map-canvas'></div>

<div id='messages'></div>

<script>

var tempoutages = [
{
_id: {
stationId: "20967",
outageStart: "2014-05-31 17:13:37 UTC"
},
duration: 1348,
isActive: true,
outageEnd: null,
stop_name: "Oregon Station",
line_code: "BSS"
},
{
_id: {
stationId: "21532",
outageStart: "2014-05-31 17:13:35 UTC"
},
duration: 1348,
isActive: true,
outageEnd: null,
stop_name: "30th St Station",
line_code: "MFL"
},
{
_id: {
stationId: "2449",
outageStart: "2014-06-01 15:01:44 UTC"
},
duration: 40,
isActive: true,
outageEnd: null,
stop_name: "56th St Station",
line_code: "MFL"
}
];

var railStations = {"line":"ALL","stations":[{"_id":"21531","stop_name":"8th St & Market St","stop_lat":"39.951129","stop_lon":"-75.153506","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"21532","stop_name":"30th St Station","stop_lat":"39.95477","stop_lon":"-75.183264","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null,"elevatorOutage":{"line":"Market Frankford Line","station":"30th Street","elevator":"Street to Mezzanine","message":"No access to/from station","message_html":"<ul><li>No access to/from station</li></ul>","alternate_url":"http://www.septa.org/service/accessible_septa/alt_service_mfl.html"},"outageTracker":{"_id":{"stationId":"21532","outageStart":"2014-05-31 17:13:35 UTC"},"duration":0,"isActive":true,"outageEnd":null,"stop_name":"30th St Station","line_code":"MFL"}},{"_id":"30519","stop_name":"Ardmore Junction Station","stop_lat":"39.996262","stop_lon":"-75.303695","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"PATCO240","stop_name":"Lindenwold","stop_lat":"39.83389","stop_lon":"-75.00056","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO241","stop_name":"Ashland (Voorhees)","stop_lat":"39.85856","stop_lon":"-75.009199","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO242","stop_name":"Woodcrest/Cherry Hill","stop_lat":"39.8695145128","stop_lon":"-75.0106787682","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO243","stop_name":"Haddonfield","stop_lat":"39.8970285235","stop_lon":"-75.0366640091","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO244","stop_name":"Westmont (Haddon Twp)","stop_lat":"39.907117","stop_lon":"-75.046775","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO245","stop_name":"Collingswood","stop_lat":"39.913561","stop_lon":"-75.064561","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO246","stop_name":"Ferry Ave (Camden)","stop_lat":"39.922852992","stop_lon":"-75.091906786","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO247","stop_name":"Broadway (Camden)","stop_lat":"39.94319792","stop_lon":"-75.1202845573","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO248","stop_name":"City Hall (Camden)","stop_lat":"39.9450733307","stop_lon":"-75.1211535931","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO249","stop_name":"8th & Market St","stop_lat":"39.951181","stop_lon":"-75.1532","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO250","stop_name":"9-10th & Locust St","stop_lat":"39.9472365695","stop_lon":"-75.1568698883","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO251","stop_name":"12-13th & Locust St","stop_lat":"39.947731","stop_lon":"-75.160797","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"PATCO252","stop_name":"15-16th & Locust St","stop_lat":"39.948417","stop_lon":"-75.166208","location_type":null,"parent_station":null,"zone_id":null,"wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":null,"PATCO":"1"},{"_id":"60","stop_name":"Allegheny Station","stop_lat":"39.996444","stop_lon":"-75.113345","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"61","stop_name":"Frankford Transportation Center","stop_lat":"40.023427","stop_lon":"-75.077197","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"82","stop_name":"Olney Transportation Center","stop_lat":"40.039066","stop_lon":"-75.144737","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"140","stop_name":"Erie Station","stop_lat":"40.009172","stop_lon":"-75.151226","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"142","stop_name":"Allegheny Station","stop_lat":"40.001536","stop_lon":"-75.152887","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"152","stop_name":"A T and T Station","stop_lat":"39.905379","stop_lon":"-75.173709","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"217","stop_name":"Margaret & Orthodox Station","stop_lat":"40.016734","stop_lon":"-75.083955","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"353","stop_name":"Girard Station","stop_lat":"39.968841","stop_lon":"-75.13611","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"416","stop_name":"69th St Transportation Center MFL East","stop_lat":"39.96232","stop_lon":"-75.258555","location_type":null,"parent_station":"31034","zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":"1","PATCO":null},{"_id":"428","stop_name":"2nd St Station          ","stop_lat":"39.949822","stop_lon":"-75.14371","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"797","stop_name":"Somerset Station","stop_lat":"39.99138","stop_lon":"-75.122596","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"838","stop_name":"Erie Torresdale Station","stop_lat":"40.00586","stop_lon":"-75.096133","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"1272","stop_name":"Logan Station","stop_lat":"40.030671","stop_lon":"-75.14658","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1273","stop_name":"Wyoming Station","stop_lat":"40.024569","stop_lon":"-75.147892","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1274","stop_name":"Hunting Park Station","stop_lat":"40.016897","stop_lon":"-75.14953","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1276","stop_name":"Susquehanna Dauphin Station","stop_lat":"39.98704","stop_lon":"-75.156097","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1277","stop_name":"Cecil B. Moore Station","stop_lat":"39.978591","stop_lon":"-75.157843","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1278","stop_name":"Fairmount Station","stop_lat":"39.966959","stop_lon":"-75.160391","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1279","stop_name":"Spring Garden Station","stop_lat":"39.962338","stop_lon":"-75.161388","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1280","stop_name":"Race Vine Station","stop_lat":"39.957039","stop_lon":"-75.162601","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1281","stop_name":"City Hall Station","stop_lat":"39.952473","stop_lon":"-75.164106","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1282","stop_name":"Walnut Locust Station","stop_lat":"39.948716","stop_lon":"-75.164498","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1283","stop_name":"Lombard South Station","stop_lat":"39.944095","stop_lon":"-75.165424","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1284","stop_name":"Ellsworth Federal Station","stop_lat":"39.936191","stop_lon":"-75.167141","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1285","stop_name":"Tasker Morris Station","stop_lat":"39.929786","stop_lon":"-75.168475","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1286","stop_name":"Snyder Station","stop_lat":"39.924309","stop_lon":"-75.169617","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"1392","stop_name":"15th St Station","stop_lat":"39.952502","stop_lon":"-75.165298","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"1892","stop_name":"Bridgeport Station","stop_lat":"40.104964","stop_lon":"-75.348141","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":"0","MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1895","stop_name":"Gulph Mills Station","stop_lat":"40.070838","stop_lon":"-75.342325","location_type":null,"parent_station":"31031","zone_id":"2","wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1900","stop_name":"Stadium Station ","stop_lat":"40.032681","stop_lon":"-75.340776","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1902","stop_name":"Roberts Rd Station ","stop_lat":"40.021383","stop_lon":"-75.33027","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1908","stop_name":"Beechwood Brookline Station","stop_lat":"39.986521","stop_lon":"-75.291495","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1917","stop_name":"Parkview Station","stop_lat":"39.968982","stop_lon":"-75.274804","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1918","stop_name":"Township Line Rd Station","stop_lat":"39.974791","stop_lon":"-75.281572","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1919","stop_name":"Penfield Station Manoa Rd","stop_lat":"39.981015","stop_lon":"-75.283992","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1921","stop_name":"Wynnewood Rd Station","stop_lat":"39.993382","stop_lon":"-75.298229","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1923","stop_name":"Ardmore Av Station","stop_lat":"39.999918","stop_lon":"-75.309467","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1924","stop_name":"Haverford Station      ","stop_lat":"40.009821","stop_lon":"-75.315158","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1925","stop_name":"Bryn Mawr Station           ","stop_lat":"40.018075","stop_lon":"-75.323419","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1927","stop_name":"Garrett Hill Station","stop_lat":"40.027957","stop_lon":"-75.336396","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1929","stop_name":"Villanova Station      ","stop_lat":"40.034049","stop_lon":"-75.344037","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1930","stop_name":"Radnor Station","stop_lat":"40.042061","stop_lon":"-75.353617","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1931","stop_name":"County Line Station","stop_lat":"40.050108","stop_lon":"-75.347376","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1932","stop_name":"Matsonford Station","stop_lat":"40.058215","stop_lon":"-75.339455","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1934","stop_name":"Hughes Park Station","stop_lat":"40.081392","stop_lon":"-75.34902","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":null,"MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"1935","stop_name":"DeKalb St Station","stop_lat":"40.098736","stop_lon":"-75.352065","location_type":null,"parent_station":null,"zone_id":"2","wheelchair_boarding":"0","MFL":null,"BSS":null,"NHSL":"1","PATCO":null},{"_id":"2439","stop_name":"North Philadelphia","stop_lat":"39.9939","stop_lon":"-75.154582","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"2440","stop_name":"Chinatown Station","stop_lat":"39.955251","stop_lon":"-75.152794","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"2446","stop_name":"Millbourne Station","stop_lat":"39.964365","stop_lon":"-75.252314","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2447","stop_name":"63rd St Station","stop_lat":"39.962741","stop_lon":"-75.246743","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2448","stop_name":"60th St Station","stop_lat":"39.961991","stop_lon":"-75.240757","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2449","stop_name":"56th St Station","stop_lat":"39.961007","stop_lon":"-75.232847","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2450","stop_name":"52nd St Station","stop_lat":"39.960012","stop_lon":"-75.224889","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2451","stop_name":"46th St Station","stop_lat":"39.958646","stop_lon":"-75.213922","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2452","stop_name":"40th St Station","stop_lat":"39.957161","stop_lon":"-75.202034","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2453","stop_name":"34th St Station","stop_lat":"39.955848","stop_lon":"-75.191504","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2455","stop_name":"13th St Station","stop_lat":"39.952021","stop_lon":"-75.161462","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2456","stop_name":"11th St Station","stop_lat":"39.951648","stop_lon":"-75.158346","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2457","stop_name":"8th St Station","stop_lat":"39.951066","stop_lon":"-75.153519","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2458","stop_name":"5th St Station","stop_lat":"39.950485","stop_lon":"-75.148892","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2459","stop_name":"Spring Garden Station","stop_lat":"39.960399","stop_lon":"-75.140408","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2460","stop_name":"Berks Station","stop_lat":"39.978679","stop_lon":"-75.133542","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2461","stop_name":"York Dauphin Station","stop_lat":"39.986191","stop_lon":"-75.132011","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2462","stop_name":"Huntingdon Station","stop_lat":"39.988759","stop_lon":"-75.127463","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2463","stop_name":"Tioga Station","stop_lat":"40.000238","stop_lon":"-75.106392","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"2464","stop_name":"Church Station","stop_lat":"40.01091","stop_lon":"-75.088628","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"20845","stop_name":"69th St Transportation Center MFL West","stop_lat":"39.962428","stop_lon":"-75.258555","location_type":null,"parent_station":"31034","zone_id":"2","wheelchair_boarding":"1","MFL":"1","BSS":null,"NHSL":null,"PATCO":null},{"_id":"20965","stop_name":"Fern Rock Transportation Center","stop_lat":"40.04185","stop_lon":"-75.136745","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"20966","stop_name":"Girard Station","stop_lat":"39.971401","stop_lon":"-75.159417","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":null,"MFL":null,"BSS":"1","NHSL":null,"PATCO":null},{"_id":"20967","stop_name":"Oregon Station","stop_lat":"39.916753","stop_lon":"-75.171285","location_type":null,"parent_station":null,"zone_id":"1","wheelchair_boarding":"1","MFL":null,"BSS":"1","NHSL":null,"PATCO":null,"elevatorOutage":{"line":"Broad Street Subway / Broad Ridge Spur","station":"Oregon","elevator":"Street Level","message":"No access to/from station","message_html":"<ul><li>No access to/from station</li></ul>","alternate_url":"http://www.septa.org/service/accessible_septa/alt_service_bsl.html"},"outageTracker":{"_id":{"stationId":"20967","outageStart":"2014-05-31 17:13:37 UTC"},"duration":0,"isActive":true,"outageEnd":null,"stop_name":"Oregon Station","line_code":"BSS"}},{"_id":"30520","stop_name":"Norristown Transportation Center","stop_lat":"40.113468","stop_lon":"-75.345161","location_type":null,"parent_station":"31038","zone_id":"2","wheelchair_boarding":"1","MFL":null,"BSS":null,"NHSL":"1","PATCO":null}]};


</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1943290-12', 'jimsmiley.us');
  ga('send', 'pageview');

</script>
</body>
</html>
